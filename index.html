<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Celestial Hub ‚ú®</title>
  <style>
    :root {
      --bg:#0b0a12; --card:#141226; --ink:#f7f2ff; --sub:#b9a9d6;
      --accent:#f0c6ff; --accent2:#a78bfa; --line:#2a2543;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--ink); background:
        radial-gradient(1200px 600px at 20% -10%, #1b1633 0%, transparent 60%),
        radial-gradient(1200px 600px at 120% 10%, #1a1430 0%, transparent 60%),
        linear-gradient(#0a0914, #0b0a12);
      min-height:100svh; padding:24px;
    }
    .shell{max-width:980px;margin:0 auto}
    .title{font-weight:800; letter-spacing:.5px; font-size:28px; margin:0 0 6px}
    .subtitle{margin:0 0 20px; color:var(--sub)}
    .tabs{
      display:flex; gap:8px; background:rgba(255,255,255,.02);
      border:1px solid var(--line); padding:6px; border-radius:14px; backdrop-filter: blur(6px);
    }
    .tab-btn{
      appearance:none; border:1px solid var(--line); background:var(--card);
      color:var(--ink); padding:10px 14px; border-radius:10px; cursor:pointer;
      font-weight:600; letter-spacing:.2px;
    }
    .tab-btn[aria-selected="true"]{
      border-color:var(--accent2); outline:2px solid rgba(167,139,250,.25);
      box-shadow:0 0 0 3px rgba(167,139,250,.1) inset; 
    }
    .card{
      margin-top:14px; background:var(--card); border:1px solid var(--line);
      border-radius:16px; padding:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
    }
    .row{display:flex; gap:10px; flex-wrap:wrap}
    input[type="text"], textarea{
      width:100%; background:#0f0d1d; color:var(--ink); border:1px solid var(--line);
      border-radius:10px; padding:10px 12px; outline:none;
    }
    textarea{min-height:160px; resize:vertical}
    .pill{font-size:12px; color:var(--sub); padding:2px 8px; border:1px solid var(--line); border-radius:999px}
    .list{display:grid; gap:8px; margin-top:8px}
    .item{display:flex; justify-content:space-between; align-items:center; gap:10px;
      padding:10px; border:1px dashed var(--line); border-radius:10px; background:#0f0d1d}
    .ghost{opacity:.7}
    button.small{padding:6px 10px; border-radius:8px; background:#1a1630; border:1px solid var(--line); color:var(--ink); cursor:pointer}
    .spark{position:fixed; inset:0; pointer-events:none; background-image:radial-gradient(2px 2px at 20% 30%, rgba(240,198,255,.6), transparent 60%),
      radial-gradient(2px 2px at 60% 10%, rgba(167,139,250,.5), transparent 60%),
      radial-gradient(1px 1px at 80% 80%, rgba(255,255,255,.35), transparent 60%);}
  </style>
</head>
<body>
  <div class="spark" aria-hidden="true"></div>
  <main class="shell">
    <h1 class="title">Celestial Hub ‚ú®</h1>
    <p class="subtitle">v2 ¬∑ Totally Spies energy ¬∑ Music ¬∑ Notes ¬∑ Hype (Affirmations)</p>

    <nav class="tabs" role="tablist" aria-label="Celestial Tabs">
      <button class="tab-btn" role="tab" aria-selected="true" aria-controls="music" id="tab-music">Music</button>
      <button class="tab-btn" role="tab" aria-selected="false" aria-controls="notes" id="tab-notes">Notes</button>
      <button class="tab-btn" role="tab" aria-selected="false" aria-controls="hype"  id="tab-hype">Hype</button>
    </nav>

    <!-- MUSIC -->
    <section class="card" id="music" role="tabpanel" aria-labelledby="tab-music">
      <div class="row" style="align-items:center; justify-content:space-between">
        <h2 style="margin:0">üéµ Music</h2>
        <span class="pill">Player + Playlist (URLs)</span>
      </div>
      <audio id="player" controls style="width:100%; margin-top:10px"></audio>

      <div class="row" style="margin-top:10px">
        <input id="trackTitle" type="text" placeholder="Track title" />
        <input id="trackUrl"   type="text" placeholder="Direct MP3/stream URL (you must own rights)" />
        <button class="small" id="addTrack">Add</button>
      </div>

      <div class="list" id="playlist"></div>
      <div class="row" style="margin-top:8px">
        <button class="small" id="prevBtn">‚èÆÔ∏è Prev</button>
        <button class="small" id="nextBtn">‚è≠Ô∏è Next</button>
        <button class="small" id="shuffleBtn">üîÄ Shuffle</button>
        <span class="pill" id="nowPlaying" aria-live="polite">Now Playing: ‚Äî</span>
      </div>
    </section>

    <!-- NOTES -->
    <section class="card" id="notes" role="tabpanel" aria-labelledby="tab-notes" hidden>
      <h2 style="margin-top:0">üìù Cosmic Notes</h2>
      <textarea id="notesBox" placeholder="Brain dump, plans, ideas‚Ä¶ saved automatically"></textarea>
      <div class="row" style="margin-top:8px">
        <button class="small" id="clearNotes">Clear</button>
        <span class="pill ghost">Saved to this device</span>
      </div>
    </section>

    <!-- HYPE -->
    <section class="card" id="hype" role="tabpanel" aria-labelledby="tab-hype" hidden>
      <div class="row" style="align-items:center; justify-content:space-between">
        <h2 style="margin:0">üíñ Hype (Affirmations)</h2>
        <span class="pill">Saved locally</span>
      </div>

      <div class="row" style="margin-top:8px">
        <input id="affInput" type="text" placeholder="Add a custom affirmation‚Ä¶" />
        <button class="small" id="addAff">Add</button>
        <button class="small" id="shuffleAff">Shuffle One</button>
      </div>

      <div class="list" id="affList"></div>
      <div style="margin-top:8px">
        <div class="pill" id="affNow">‚Äî</div>
      </div>
    </section>
  </main>

  <script>
    // ---------- Tabs ----------
    const tabs = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      music: document.getElementById('music'),
      notes: document.getElementById('notes'),
      hype:  document.getElementById('hype')
    };
    tabs.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        tabs.forEach(b=>b.setAttribute('aria-selected', b===btn ? 'true':'false'));
        Object.values(panels).forEach(p=>p.hidden=true);
        panels[btn.id.replace('tab-','')].hidden = false;
      });
    });

    // ---------- Notes (localStorage) ----------
    const NOTES_KEY = 'celestial_notes_v1';
    const notesBox = document.getElementById('notesBox');
    const clearNotes = document.getElementById('clearNotes');
    notesBox.value = localStorage.getItem(NOTES_KEY) || '';
    notesBox.addEventListener('input', ()=> localStorage.setItem(NOTES_KEY, notesBox.value));
    clearNotes.addEventListener('click', ()=>{
      notesBox.value=''; localStorage.removeItem(NOTES_KEY);
    });

    // ---------- Hype (Affirmations) ----------
    const AFF_KEY = 'celestial_affirmations_v1';
    const defaultAff = [
      "I am the main character.",
      "My standards create my reality.",
      "Aligned opportunities find me.",
      "Soft life, smart moves.",
      "Money, love, and joy flow to me easily."
    ];
    let affs = JSON.parse(localStorage.getItem(AFF_KEY) || 'null') || defaultAff.slice();
    const affList = document.getElementById('affList');
    const affInput = document.getElementById('affInput');
    const addAff = document.getElementById('addAff');
    const shuffleAff = document.getElementById('shuffleAff');
    const affNow = document.getElementById('affNow');

    function renderAff(){
      affList.innerHTML='';
      affs.forEach((t, i)=>{
        const row=document.createElement('div'); row.className='item';
        row.innerHTML=`<div style="flex:1">${t}</div>
                       <div class="row">
                         <button class="small" data-i="${i}" data-act="up">‚Üë</button>
                         <button class="small" data-i="${i}" data-act="down">‚Üì</button>
                         <button class="small" data-i="${i}" data-act="del">Remove</button>
                       </div>`;
        affList.appendChild(row);
      });
      localStorage.setItem(AFF_KEY, JSON.stringify(affs));
    }
    renderAff();

    affList.addEventListener('click', e=>{
      const btn=e.target.closest('button'); if(!btn) return;
      const i=+btn.dataset.i; const act=btn.dataset.act;
      if(act==='del'){ affs.splice(i,1); }
      if(act==='up' && i>0){ [affs[i-1], affs[i]]=[affs[i], affs[i-1]]; }
      if(act==='down' && i<affs.length-1){ [affs[i+1], affs[i]]=[affs[i], affs[i+1]]; }
      renderAff();
    });
    addAff.addEventListener('click', ()=>{
      const v=affInput.value.trim(); if(!v) return;
      affs.push(v); affInput.value=''; renderAff();
    });
    function pickAff(){
      if(!affs.length) return '‚Äî';
      return affs[Math.floor(Math.random()*affs.length)];
    }
    shuffleAff.addEventListener('click', ()=>{ affNow.textContent = pickAff(); });
    affNow.textContent = pickAff();

    // ---------- Music (simple URL playlist) ----------
    const MUSIC_KEY = 'celestial_music_v1';
    let playlist = JSON.parse(localStorage.getItem(MUSIC_KEY) || '[]');
    let current = 0;

    const player = document.getElementById('player');
    const playlistEl = document.getElementById('playlist');
    const addTrackBtn = document.getElementById('addTrack');
    const titleIn = document.getElementById('trackTitle');
    const urlIn = document.getElementById('trackUrl');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const nowPlaying = document.getElementById('nowPlaying');

    function savePlaylist(){ localStorage.setItem(MUSIC_KEY, JSON.stringify(playlist)); }
    function renderPlaylist(){
      playlistEl.innerHTML='';
      playlist.forEach((t,i)=>{
        const row=document.createElement('div'); row.className='item';
        row.innerHTML=`<div style="flex:1"><strong>${t.title||'Untitled'}</strong><br><span class="pill ghost">${t.url}</span></div>
                       <div class="row">
                         <button class="small" data-i="${i}" data-act="play">Play</button>
                         <button class="small" data-i="${i}" data-act="del">Remove</button>
                       </div>`;
        playlistEl.appendChild(row);
      });
      savePlaylist();
    }
    function load(i){
      if(!playlist.length) { player.removeAttribute('src'); nowPlaying.textContent='Now Playing: ‚Äî'; return; }
      current = (i+playlist.length)%playlist.length;
      const t = playlist[current];
      player.src = t.url; player.play().catch(()=>{});
      nowPlaying.textContent = 'Now Playing: ' + (t.title || t.url);
    }
    playlistEl.addEventListener('click', e=>{
      const btn=e.target.closest('button'); if(!btn) return;
      const i=+btn.dataset.i; const act=btn.dataset.act;
      if(act==='play'){ load(i); }
      if(act==='del'){ playlist.splice(i,1); renderPlaylist(); if(i===current) load(0); }
    });
    addTrackBtn.addEventListener('click', ()=>{
      const title = titleIn.value.trim();
      const url = urlIn.value.trim();
      if(!url) return;
      playlist.push({title, url});
      titleIn.value=''; urlIn.value='';
      renderPlaylist(); if(playlist.length===1) load(0);
    });
    prevBtn.addEventListener('click', ()=> load(current-1));
    nextBtn.addEventListener('click', ()=> load(current+1));
    shuffleBtn.addEventListener('click', ()=>{
      if(!playlist.length) return;
      load(Math.floor(Math.random()*playlist.length));
    });

    renderPlaylist(); if(playlist.length) load(0);
  </script>
</body>
</html>
